-- Receiver side
local modem = peripheral.wrap("bottom") -- Wireless modem on bottom
local channel = 1

local finalscreenRunning = false

print("Waiting for wireless button press...")

while true do
    local event, side, senderChannel, replyChannel, message, distance = os.pullEvent("modem_message")

    if senderChannel == channel and message == "button_pressed" then
        if not finalscreenRunning then
            -- Start finalscreen directly
            print("Starting Finalscreen...")
            shell.run("finalscreen.lua")
            finalscreenRunning = true
            print("Finalscreen started")
        else
            -- Shutdown computer to stop finalscreen
            print("Stopping Finalscreen...")
            redstone.setOutput("bottom", false)
            os.shutdown()
        end
    end
end
