-- Receiver side
rednet.open("bottom") -- open the modem on the bottom side
local channel = 1

local finalscreenRunning = false

while true do
    local event, side, senderChannel, replyChannel, message, distance = os.pullEvent("modem_message")
    
    if senderChannel == channel and message == "button_pressed" then
        if not finalscreenRunning then
            -- Start finalscreen
            shell.openTab("finalscreen.lua", "start")
            finalscreenRunning = true
            print("Finalscreen started")
        else
            -- Tell finalscreen to stop
            rednet.broadcast("stop_finalscreen", channel)
            finalscreenRunning = false
            print("Finalscreen stopping")
        end
    end
end
