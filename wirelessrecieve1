-- Receiver side
local modem = peripheral.wrap("front") -- modem is on front
local channel = 1

modem.open(channel)

local touchscreenRunning = false
local touchscreenProcessID = nil

while true do
    local event, side, senderChannel, replyChannel, message, distance = os.pullEvent("modem_message")
    
    if senderChannel == channel and message == "button_pressed" then
        if not touchscreenRunning then
            -- Start touchscreen.lua
            touchscreenProcessID = shell.openTab("touchscreen.lua")
            touchscreenRunning = true
            print("Touchscreen started")
        else
            -- Stop touchscreen.lua
            if touchscreenProcessID then
                shell.terminate(touchscreenProcessID)
            end
            touchscreenRunning = false
            print("Touchscreen stopped")
        end
    end
end
