-- Receiver side
rednet.open("bottom") -- open the modem on the front side
local channel = 1

local finalscreenRunning = false
local finalscreenProcessID = nil

while true do
    local event, side, senderChannel, replyChannel, message, distance = os.pullEvent("modem_message")
    
    if senderChannel == channel and message == "button_pressed" then
        if not finalscreenRunning then
            -- Start touchscreen.lua
            finalscreenProcessID = shell.openTab("finalscreen.lua")
            finalscreenRunning = true
            print("Touchscreen started")
        else
            -- Stop touchscreen.lua
            if finalscreenProcessID then
                shell.terminate(finalscreenProcessID)
            end
            finalscreenRunning = false
            print("Touchscreen stopped")
        end
    end
end
