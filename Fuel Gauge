-- Simple debug script to read value from target block
-- Configuration
local targetName = "front" -- Peripheral in front of the computer
local updateInterval = 1   -- Update interval in seconds

-- Clear the screen
term.clear()
term.setCursorPos(1, 1)
print("Target Block Value Reader")
print("------------------------")
print("Checking peripheral on " .. targetName .. " side")

-- Main loop
while true do
    -- Try to wrap the peripheral
    local target = peripheral.wrap(targetName)
    
    -- Clear the bottom part of the screen
    term.setCursorPos(1, 5)
    term.clearLine()
    term.setCursorPos(1, 6)
    term.clearLine()
    term.setCursorPos(1, 7)
    term.clearLine()
    term.setCursorPos(1, 8)
    term.clearLine()
    
    term.setCursorPos(1, 5)
    
    if not target then
        print("No peripheral found on " .. targetName .. " side")
    else
        -- List available methods
        print("Available methods:")
        local methods = {}
        for method, _ in pairs(target) do
            table.insert(methods, method)
        end
        print(table.concat(methods, ", "))
        
        -- Try different methods to read data
        term.setCursorPos(1, 7)
        
        -- Method 1: getLine
        if target.getLine then
            local value = target.getLine(1)
            print("getLine(1): [" .. tostring(value) .. "]")
        end
        
        -- Method 2: readLine
        if target.readLine then
            local value = target.readLine(1)
            print("readLine(1): [" .. tostring(value) .. "]")
        end
        
        -- Method 3: getText
        if target.getText then
            local value = target.getText()
            print("getText(): [" .. tostring(value) .. "]")
        end
        
        -- Method 4: read all text
        if target.readAll then
            local value = target.readAll()
            print("readAll(): [" .. tostring(value) .. "]")
        end
    end
    
    -- Wait before trying again
    sleep(updateInterval)
end
